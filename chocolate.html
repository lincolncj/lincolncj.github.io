<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Briar's Favorite Chocolate</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap">
  <style>
    body.theme-chocolate {
      background: linear-gradient(180deg, #4e2e13 0%, #8B4513 100%);
      color: #fff;
    }
    .drip {
      width: 100vw;
      height: 40px;
      background: url('https://svgshare.com/i/14kA.svg') repeat-x;
      margin-bottom: -18px;
      z-index: 2;
      position: relative;
    }
    h1.choco {
      font-family: 'Luckiest Guy', cursive, sans-serif;
      color: #FFD700;
      text-shadow: 2px 4px 0 #4e2e13, 0 2px 12px #0008;
      font-size: 2.5rem;
      margin-bottom: 0.2em;
      letter-spacing: 2px;
      position: relative;
      z-index: 3;
    }
    @keyframes chocoBadgePop {
      0% { transform: scale(0.7) rotate(-8deg); opacity: 0; }
      60% { transform: scale(1.15) rotate(3deg); opacity: 1; }
      100% { transform: scale(1) rotate(-2deg); opacity: 1; }
    }
    @keyframes cursorWiggle {
      0%, 100% { transform: translateY(0) rotate(-10deg); }
      20% { transform: translateY(-4px) rotate(0deg); }
      40% { transform: translateY(2px) rotate(10deg); }
      60% { transform: translateY(-2px) rotate(-8deg); }
      80% { transform: translateY(1px) rotate(6deg); }
    }
    .choco-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5em;
      background: linear-gradient(90deg, #a0522d 60%, #ffd700 100%);
      color: #fffbe7;
      font-family: 'Luckiest Guy', cursive, sans-serif;
      font-size: 1.3rem;
      border-radius: 2em;
      box-shadow: 0 2px 12px #4e2e1399, 0 1.5px 0 #FFD700 inset;
      padding: 0.4em 1.2em 0.4em 1.1em;
      margin: 0.7em auto 0.5em;
      width: fit-content;
      animation: chocoBadgePop 0.7s cubic-bezier(.2,1.2,.4,1) 0.2s both;
      position: relative;
      z-index: 4;
      letter-spacing: 1.5px;
    }
    .choco-badge .cursor {
      display: inline-block;
      margin-left: 0.4em;
      font-size: 1.2em;
      color: #fff;
      filter: drop-shadow(0 1px 2px #654321);
      animation: cursorWiggle 1.2s infinite cubic-bezier(.5,1.5,.5,1);
      transform-origin: 60% 60%;
    }
    .choco-badge .emoji {
      font-size: 1.3em;
      filter: drop-shadow(0 1px 2px #654321);
    }
    .choco-fact, .choco-pun {
      display: none;
    }
    .pocket-wrap.chocolate-bar {
      box-shadow: 0 8px 32px #4e2e13cc, 0 1.5px 0 #FFD700 inset;
      border-radius: 18px;
      background: rgba(139,69,19,0.12);
      position: relative;
    }
    .pocket-wrap.chocolate-bar:before {
      content: 'üç´';
      position: absolute;
      left: 12px;
      top: 8px;
      font-size: 2.2rem;
      filter: drop-shadow(0 2px 2px #0008);
      opacity: 0.7;
      z-index: 2;
    }
    .pocket-wrap.chocolate-bar:after {
      content: '100% COCOA';
      position: absolute;
      right: 18px;
      bottom: 8px;
      color: #FFD700;
      font-size: 1.1rem;
      font-family: 'Luckiest Guy', cursive, sans-serif;
      opacity: 0.7;
      letter-spacing: 1px;
      z-index: 2;
    }
    .hint {
      color: #FFD700;
      text-shadow: 0 1px 4px #4e2e13;
    }
  </style>
</head>
<body class="theme-chocolate">
  <div class="nav-container">
    <div class="nav-dropdown" id="navDropdown">
      <button class="nav-button" id="navButton">
        <span>Navigate</span>
        <span class="nav-arrow">‚ñº</span>
      </button>
      <div class="nav-menu" id="navMenu">
        <a href="index.html" class="nav-item">üê≠ Gruzz's Mouse</a>
        <a href="chocolate.html" class="nav-item current">üç´ Brian's Chocolate</a>
        <a href="jeffrey.html" class="nav-item">üçÜ Jeffrey's... Adventure</a>
      </div>
    </div>
  </div>

  <div class="drip"></div>
  <h1 class="choco">Brian's Chocolate Dilemma üç´</h1>
  <div class="choco-badge" title="Brian's favorite!">
    <span class="emoji">üç´</span> BRIAN'S CHOICE <span class="cursor">üç¨</span>
  </div>

  <div class="pocket-scene">
    <div class="pocket-wrap chocolate-bar" id="pocket">
      <!-- Chocolate bar shaped "pocket" -->
      <svg class="pocket-base" viewBox="0 0 300 200" aria-hidden="true">
        <!-- Chocolate bar gradients -->
        <defs>
          <linearGradient id="chocolateBar" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#CD853F"></stop>
            <stop offset="50%" stop-color="#A0522D"></stop>
            <stop offset="100%" stop-color="#8B4513"></stop>
          </linearGradient>
          <linearGradient id="chocolateWrapper" x1="0" x2="0" y1="0" y2="1">
            <stop offset="0%" stop-color="#DC143C"></stop>
            <stop offset="100%" stop-color="#B22222"></stop>
          </linearGradient>
        </defs>
        
        <!-- Chocolate bar wrapper (background) -->
        <rect x="40" y="60" width="220" height="80" fill="url(#chocolateWrapper)" stroke="#8B0000" stroke-width="2" rx="8"/>
        
        <!-- Chocolate bar itself -->
        <rect x="50" y="70" width="200" height="60" fill="url(#chocolateBar)" stroke="#654321" stroke-width="2" rx="4"/>
        
        <!-- Chocolate squares grid -->
        <g stroke="#654321" stroke-width="1" opacity="0.7">
          <line x1="90" y1="70" x2="90" y2="130"/>
          <line x1="130" y1="70" x2="130" y2="130"/>
          <line x1="170" y1="70" x2="170" y2="130"/>
          <line x1="210" y1="70" x2="210" y2="130"/>
          <line x1="50" y1="90" x2="250" y2="90"/>
          <line x1="50" y1="110" x2="250" y2="110"/>
        </g>
        
        <!-- Wrapper text -->
        
        <!-- Highlight -->
        <rect x="55" y="75" width="190" height="8" fill="rgba(255,255,255,.3)" rx="2"/>
      </svg>

      <!-- The chocolate piece that pops out -->
      <div class="pocket-item chocolate-piece" id="pocketItem">
        <div class="face" aria-hidden="true">üç´</div>
        <span class="tiny" aria-hidden="true">definitely chocolate</span>
      </div>

      <!-- Speech bubble -->
      <div class="speech" id="speech" aria-live="polite" style="opacity: 0;">I love chocolate!</div>
    </div>

    <div class="controls">
      <button id="checkBtn">Check for chocolate</button>
      <button id="feedBtn" title="Drop some chocolate">More chocolate üç´</button>
    </div>
    <div class="hint">Tip: Click the big reveal to go back.<br>üç´ This page may contain traces of nuts.</div>
  </div>

  <!-- Fullscreen Brian reveal -->
  <div class="fullscreen-reveal" id="fullscreenReveal" role="dialog" aria-label="Fullscreen Brian Griffin chocolate dilemma">
    <div class="inner">
      <video id="brianVideo" style="display:none;">
        <source src="https://s3.amazonaws.com/v.comb.io/MLNENt5P/9SFSso.mp4" type="video/mp4">
      </video>
      <img src="https://i.imgflip.com/1wz8zf.jpg" alt="Brian Griffin saying I love chocolate but I can't eat it cause I'll get fat" id="fallbackImage">
  <div class="caption">I love chocolate, but I can't eat it cause I'll get fat! üç´</span></div>
    </div>
  </div>

  <script>
    // Navigation dropdown functionality
    const navDropdown = document.getElementById('navDropdown');
    const navButton = document.getElementById('navButton');
    const navMenu = document.getElementById('navMenu');

    navButton.addEventListener('click', (e) => {
      e.preventDefault();
      navDropdown.classList.toggle('open');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', (e) => {
      if (!navDropdown.contains(e.target)) {
        navDropdown.classList.remove('open');
      }
    });

    // Pocket game functionality
    const pocket = document.getElementById('pocket');
    const speech = document.getElementById('speech');
    const checkBtn = document.getElementById('checkBtn');
    const feedBtn = document.getElementById('feedBtn');
    const fullscreen = document.getElementById('fullscreenReveal');

    const lines = [
      "I love chocolate!",
      "But I can't eat it...",
      "Cause I'll get fat!",
      "This is my dilemma.",
      "Why is life so cruel?",
      "Chocolate is my spirit animal.",
      "If lost, please return to nearest chocolate bar.",
      "I tried to give up chocolate, but I'm not a quitter.",
      "Will work for chocolate.",
      "Chocolate understands me.",
      "Calories? Never heard of her.",
      "I‚Äôm just here for the snacks.",
      "Chocolate: the answer to every question.",
      "I have a choco-lot of feelings.",
      "This page is 100% cocoa-powered!"
    ];

    function sayRandom() {
      const line = lines[Math.floor(Math.random() * lines.length)];
      speech.textContent = line;
    }

    function dropChocolate(count = 22) {
      for (let i = 0; i < count; i++) {
        const s = document.createElement('span');
        s.className = 'confetti';
        s.textContent = 'üç´';
        const duration = 2600 + Math.random() * 2200;
        const size = 18 + Math.random() * 20;
        const startX = Math.random() * 100;
        const delay = Math.random() * 400;

        s.style.left = startX + 'vw';
        s.style.fontSize = size + 'px';
        s.style.animationDuration = duration + 'ms';
        s.style.animationDelay = delay + 'ms';
        document.body.appendChild(s);
        setTimeout(() => s.remove(), duration + delay + 150);
      }
    }

    checkBtn.addEventListener('click', () => {
      // Pop the chocolate
      pocket.classList.add('active');
      checkBtn.disabled = true;

      // Chat a bit
      sayRandom();

      // Chocolate confetti for comedic effect
      dropChocolate(28);

      // Dramatic "full screen Brian" reveal with video
      setTimeout(() => {
        fullscreen.classList.add('show');
        
        // Try to play the video, fallback to image
        const video = document.getElementById('brianVideo');
        const image = document.getElementById('fallbackImage');
        
        // Set autoplay and loop only when showing
        video.autoplay = true;
        video.loop = true;
        video.style.display = 'block';
        image.style.display = 'none';
        
        video.play().catch(() => {
          // If video fails, show image instead
          video.style.display = 'none';
          image.style.display = 'block';
        });
      }, 1200);
    });

    feedBtn.addEventListener('click', () => {
      dropChocolate(18);
      // Make Brian express his dilemma if visible
      if (pocket.classList.contains('active')) {
        speech.textContent = "But I can't eat it cause I'll get fat!";
        speech.style.opacity = 1;
      }
    });

    // Click anywhere on the fullscreen to close and reset
    fullscreen.addEventListener('click', () => {
      fullscreen.classList.remove('show');
      
      // Stop video and remove autoplay/loop
      const video = document.getElementById('brianVideo');
      video.pause();
      video.currentTime = 0;
      video.autoplay = false;
      video.loop = false;
      
      // Reset after a moment
      setTimeout(() => {
        pocket.classList.remove('active');
        checkBtn.disabled = false;
        speech.style.opacity = 0;
      }, 400);
    });

    // Make the speech bubble fade back out after a while
    const observer = new MutationObserver(() => {
      speech.style.opacity = 1;
      clearTimeout(speech._hideTimer);
      speech._hideTimer = setTimeout(() => speech.style.opacity = 0, 2500);
    });
    observer.observe(speech, { childList: true });
  </script>
</body>
</html>